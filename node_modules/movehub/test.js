const boost = require('./index.js');

boost.on('ble-ready', status => {
    console.log('ble-ready', status);
});

boost.on('hub-found', hubDetails => {
    console.log('boost hub-found', hubDetails);

    // In this example we connect to every boost hub that is found
    boost.connect(hubDetails.address, (err, hub) => {
        if (err) {
            throw err;
        }
        main(hub);
    });
});

function main(hub) {
    hub.on('error', (err) => {
        console.error('hub error', err);
    });

    hub.on('disconnect', () => {
        console.log('hub disconnect');
    });

    hub.on('distance', distance => {
        //console.log('distance', distance, 'mm');
    });

    hub.on('color', color => {
        //console.log('color', color);
    });

    hub.on('port', details => {
        console.log('port', details);
    });

    hub.on('tilt', details => {
        //console.log('tilt', details);
    });

    hub.on('rotation', details => {
        console.log('rotation', details);
    });

    hub.on('rssi', details => {
        //console.log('rssi', details);
    });

    hub.on('connect', () => {
        console.log('hub connect');

        //hub.write('0d 00 81 39 11 0a e8 03 64 9B 64 7f 03');
        //hub.motorTime('AB', 1, 50);


            hub.motorAngle('D', 110, -75);
            setTimeout(() => {
                hub.motorAngle('D', 110, 75);
            }, 1000);


        //hub.write('0e 00 81 39 11 0b 5a 00 00 00 0e 64 7f 03');
        //hub.motorAngle('A', 90, 15);
        setTimeout(() => {


            //hub.motorAngle('D', 110, 100);
            //hub.motorAngle('A', 90, -15);
            //hub.write('0f 00 81 39 11 0c 5a 00 00 00 0e f1 64 7f 03');

            //hub.write('0d 00 81 39 11 0a e8 03 9b 64 64 7f 03');
        }, 2000);
    });
}
